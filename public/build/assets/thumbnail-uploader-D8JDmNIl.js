import{b as f,j as e,d as c,e as m,t}from"./app-C5lTwHdN.js";import{B as x}from"./button-B3Yl_OTn.js";import{T as h}from"./trash-2-Brh6uGvk.js";import{C as b}from"./cloud-upload-Belo_Jf8.js";import"./app-B1pgpXbD.js";import"./index-XrecUg5K.js";import"./index-DYvc6laF.js";function E({value:r,onChange:l}){const[s,a]=f.useState(!1),u=async o=>{const i=o.target.files?.[0];if(!i)return;a(!0);const n=new FormData;n.append("image",i);try{const d=await m.post("/dashboard/upload-thumbnail",n);l(d.data.url),t.success("Image de couverture mise à jour")}catch{t.error("Erreur lors de l'upload")}finally{a(!1)}},p=async()=>{if(r){a(!0);try{await m.post("/dashboard/delete-thumbnail",{url:r}),l(""),t.success("Image supprimée du serveur")}catch(o){console.error(o),t.error("Erreur lors de la suppression sur le serveur")}finally{a(!1)}}};return e.jsx("div",{className:"relative group w-full aspect-video rounded-xl border-2 border-dashed border-muted-foreground/20 overflow-hidden bg-muted/50 transition-all hover:border-primary/50",children:r?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:r,className:"w-full h-full object-cover",alt:"Cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col items-center justify-center gap-2",children:e.jsxs(x,{type:"button",variant:"destructive",size:"sm",onClick:p,disabled:s,className:"rounded-full shadow-lg",children:[s?e.jsx(c,{className:"h-4 w-4 animate-spin"}):e.jsx(h,{className:"h-4 w-4 mr-2"}),"Supprimer définitivement"]})})]}):e.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-full cursor-pointer p-6",children:[s?e.jsx(c,{className:"h-8 w-8 animate-spin text-primary"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-primary/10 p-3 rounded-full mb-3",children:e.jsx(b,{className:"h-6 w-6 text-primary"})}),e.jsx("p",{className:"text-sm font-semibold",children:"Image de couverture"}),e.jsx("p",{className:"text-[10px] text-muted-foreground mt-1 uppercase tracking-wider",children:"PNG, JPG ou WEBP (Max 3MB)"})]}),e.jsx("input",{type:"file",className:"hidden",onChange:u,accept:"image/*",disabled:s})]})})}export{E as default};
