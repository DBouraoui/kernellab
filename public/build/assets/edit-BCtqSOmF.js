import{c as ee,a as te,b as se,j as t,L as re,r as le,H as oe,d as ie,t as O}from"./app-DGPCan5g.js";import{a as ae,A as ne}from"./app-layout-CcIgPbOE.js";import{a as ce,u as de,F as w,b as me,h as pe,c as S,e as y,f as P,d as Q}from"./zod-schemas-BOOKTyMc.js";import{I as R}from"./input-pGgqHf-u.js";import{B as Z}from"./button-BKu1VtxA.js";import{C as q,c as G,a as J,b as K}from"./card-B7w5t2I-.js";import{S as fe,a as xe,b as ue,c as he,f as z}from"./select-B2XZWmF0.js";import be from"./markdown-editor-0W902KKY.js";import{A as je}from"./arrow-left-BEpQ0dQa.js";import{S as ge}from"./save-j3Sit7cA.js";import{I as Ne}from"./image-DTTJ89mB.js";import{L as _e}from"./lock-C8Pp4622.js";import{S as ve}from"./settings-2-DsTsZyuY.js";import{C as we}from"./clock-BCN_2nKr.js";import"./app-CnGQ27xG.js";import"./index-BxE-eOpd.js";import"./index-CApXfb9f.js";import"./dropdown-menu-B9BDWiTR.js";import"./index-iZS91M6O.js";import"./index-B_sldLAf.js";import"./index-BIcO2s-X.js";import"./index-DrygQRvF.js";import"./index-B6mdY-mV.js";import"./index-DUMTwvkv.js";import"./index-zkLdIFd1.js";import"./index-DXS21hnx.js";import"./x-b6IgYwCN.js";import"./index-C1BL1_cp.js";import"./index-CeDJjwBx.js";import"./index-Bgxp8mcL.js";import"./index-D2L6mW0U.js";import"./tooltip-B1H-JN1Z.js";import"./index-DPa3JC03.js";import"./avatar-4bez4EQy.js";import"./index-CNP4AJTI.js";import"./app-logo-icon-BJISjU6h.js";import"./chevron-right-B98-ukGQ.js";import"./label-C28QrZQf.js";import"./index-mEpDUZvr.js";import"./index-BL8r2gbd.js";import"./chevron-down-kwMYXA65.js";import"./check-6_x2AkXJ.js";import"./tabs-DwiD81Yt.js";import"./textarea-BYf018pl.js";import"./index-AbxjkZDo.js";import"./pen-line-mjoA4Pry.js";import"./eye-CzXhGvtG.js";const Se=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}]],ye=ee("Badge",Se);function Ct(l){const e=te.c(65),{post:s}=l,[o,U]=se.useState(!1);let k;e[0]===Symbol.for("react.memo_cache_sentinel")?(k=[{title:"Dashboard",href:"/dashboard"},{title:"Articles",href:"/dashboard/posts"},{title:"Modifier",href:"#"}],e[0]=k):k=e[0];const W=k;let C;e[1]===Symbol.for("react.memo_cache_sentinel")?(C=ce(pe),e[1]=C):C=e[1];const T=s.reading_time||"";let L;e[2]!==s.content||e[3]!==s.description||e[4]!==s.status||e[5]!==s.tags||e[6]!==s.thumbnail||e[7]!==s.title||e[8]!==T?(L={resolver:C,defaultValues:{title:s.title,description:s.description,content:s.content,thumbnail:s.thumbnail,status:s.status,tags:s.tags,reading_time:T}},e[2]=s.content,e[3]=s.description,e[4]=s.status,e[5]=s.tags,e[6]=s.thumbnail,e[7]=s.title,e[8]=T,e[9]=L):L=e[9];const r=de(L);let F;e[10]!==s.id?(F=function(Y){U(!0),le.patch(`/dashboard/post/${s.id}`,Y,{onSuccess:Ee,onError:Ae,onFinish:()=>U(!1)})},e[10]=s.id,e[11]=F):F=e[11];const H=F,$=`Éditer : ${s.title}`;let i;e[12]!==$?(i=t.jsx(oe,{title:$}),e[12]=$,e[13]=i):i=e[13];let a;e[14]!==r||e[15]!==H?(a=r.handleSubmit(H),e[14]=r,e[15]=H,e[16]=a):a=e[16];let I,A;e[17]===Symbol.for("react.memo_cache_sentinel")?(A=t.jsx(Z,{variant:"ghost",size:"icon",asChild:!0,className:"rounded-full",children:t.jsx(re,{href:ae.post.list(),children:t.jsx(je,{className:"h-5 w-5"})})}),I=t.jsx("h1",{className:"text-xl font-bold tracking-tight",children:"Modifier l'article"}),e[17]=I,e[18]=A):(I=e[17],A=e[18]);const X=s.id;let n;e[19]!==s.updated_at?(n=new Date(s.updated_at).toLocaleDateString(),e[19]=s.updated_at,e[20]=n):n=e[20];let c;e[21]!==s.id||e[22]!==n?(c=t.jsxs("div",{className:"flex items-center gap-4",children:[A,t.jsxs("div",{children:[I,t.jsxs("p",{className:"text-xs text-muted-foreground",children:["ID: #",X," • Dernière modif: ",n]})]})]}),e[21]=s.id,e[22]=n,e[23]=c):c=e[23];let d;e[24]!==o?(d=o?t.jsx(ie,{className:"mr-2 h-4 w-4 animate-spin"}):t.jsx(ge,{className:"mr-2 h-4 w-4"}),e[24]=o,e[25]=d):d=e[25];let m;e[26]!==o||e[27]!==d?(m=t.jsxs(Z,{type:"submit",className:"w-full sm:w-auto shadow-lg shadow-blue-500/20 bg-blue-600 hover:bg-blue-700",disabled:o,children:[d,"Enregistrer les modifications"]}),e[26]=o,e[27]=d,e[28]=m):m=e[28];let p;e[29]!==c||e[30]!==m?(p=t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 bg-background/95 backdrop-blur sticky top-0 z-10 py-4 border-b",children:[c,m]}),e[29]=c,e[30]=m,e[31]=p):p=e[31];let f;e[32]!==r.control?(f=t.jsxs("div",{className:"space-y-4",children:[t.jsx(w,{control:r.control,name:"title",render:Ie}),t.jsx(w,{control:r.control,name:"description",render:Fe})]}),e[32]=r.control,e[33]=f):f=e[33];let x;e[34]!==r.control?(x=t.jsx("div",{className:"rounded-xl border bg-card shadow-sm overflow-hidden",children:t.jsx(w,{control:r.control,name:"content",render:Le})}),e[34]=r.control,e[35]=x):x=e[35];let u;e[36]!==f||e[37]!==x?(u=t.jsxs("div",{className:"lg:col-span-8 space-y-8",children:[f,x]}),e[36]=f,e[37]=x,e[38]=u):u=e[38];let E;e[39]===Symbol.for("react.memo_cache_sentinel")?(E=t.jsxs("span",{className:"flex items-center gap-2",children:[t.jsx(Ne,{className:"h-3 w-3"})," Couverture"]}),e[39]=E):E=e[39];let M;e[40]===Symbol.for("react.memo_cache_sentinel")?(M=t.jsx(J,{className:"pb-3",children:t.jsxs(K,{className:"text-xs font-bold flex items-center justify-between uppercase tracking-widest text-muted-foreground",children:[E,t.jsxs(ye,{className:"text-[9px] gap-1 bg-background",children:[t.jsx(_e,{className:"h-2 w-2"})," Verrouillé"]})]})}),e[40]=M):M=e[40];let h;e[41]!==s.thumbnail?(h=t.jsx("img",{src:s.thumbnail,className:"w-full h-full object-cover opacity-80",alt:"Thumbnail"}),e[41]=s.thumbnail,e[42]=h):h=e[42];let B;e[43]===Symbol.for("react.memo_cache_sentinel")?(B=t.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/10 backdrop-blur-[1px]",children:t.jsx("span",{className:"text-[10px] font-bold text-white bg-black/50 px-2 py-1 rounded",children:"Modification non disponible ici"})}),e[43]=B):B=e[43];let b;e[44]!==h?(b=t.jsxs(q,{className:"border-none bg-muted/30 shadow-none overflow-hidden",children:[M,t.jsx(G,{children:t.jsxs("div",{className:"relative aspect-video rounded-lg overflow-hidden border bg-background group",children:[h,B]})})]}),e[44]=h,e[45]=b):b=e[45];let D;e[46]===Symbol.for("react.memo_cache_sentinel")?(D=t.jsx(J,{className:"pb-3 border-b bg-muted/10",children:t.jsxs(K,{className:"text-sm font-bold flex items-center gap-2",children:[t.jsx(ve,{className:"h-4 w-4"})," Paramètres"]})}),e[46]=D):D=e[46];let j;e[47]!==r.control?(j=t.jsxs(q,{className:"border shadow-sm",children:[D,t.jsxs(G,{className:"pt-6 space-y-6",children:[t.jsx(w,{control:r.control,name:"status",render:Ce}),t.jsx(w,{control:r.control,name:"reading_time",render:ke})]})]}),e[47]=r.control,e[48]=j):j=e[48];let g;e[49]!==b||e[50]!==j?(g=t.jsx("div",{className:"lg:col-span-4 space-y-6",children:t.jsxs("div",{className:"sticky top-24 space-y-6",children:[b,j]})}),e[49]=b,e[50]=j,e[51]=g):g=e[51];let N;e[52]!==u||e[53]!==g?(N=t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-10",children:[u,g]}),e[52]=u,e[53]=g,e[54]=N):N=e[54];let _;e[55]!==p||e[56]!==N||e[57]!==a?(_=t.jsxs("form",{onSubmit:a,className:"flex flex-col gap-8",children:[p,N]}),e[55]=p,e[56]=N,e[57]=a,e[58]=_):_=e[58];let v;e[59]!==r||e[60]!==_?(v=t.jsx("div",{className:"max-w-[1400px] mx-auto py-8 px-4 sm:px-6",children:t.jsx(me,{...r,children:_})}),e[59]=r,e[60]=_,e[61]=v):v=e[61];let V;return e[62]!==v||e[63]!==i?(V=t.jsxs(ne,{breadcrumbs:W,children:[i,v]}),e[62]=v,e[63]=i,e[64]=V):V=e[64],V}function ke(l){const{field:e}=l;return t.jsxs(S,{children:[t.jsx(Q,{className:"text-xs font-bold uppercase text-muted-foreground",children:"Temps de lecture"}),t.jsx(y,{children:t.jsxs("div",{className:"relative",children:[t.jsx(we,{className:"absolute left-3 top-2.5 h-4 w-4 text-muted-foreground"}),t.jsx(R,{className:"pl-9",...e})]})})]})}function Ce(l){const{field:e}=l;return t.jsxs(S,{children:[t.jsx(Q,{className:"text-xs font-bold uppercase text-muted-foreground",children:"Statut"}),t.jsxs(fe,{onValueChange:e.onChange,defaultValue:e.value,children:[t.jsx(y,{children:t.jsx(xe,{children:t.jsx(ue,{})})}),t.jsxs(he,{children:[t.jsx(z,{value:"draft",children:"Brouillon"}),t.jsx(z,{value:"published",children:"Publié"}),t.jsx(z,{value:"archived",children:"Archivé"})]})]})]})}function Le(l){const{field:e}=l;return t.jsxs(S,{children:[t.jsx(y,{children:t.jsx(be,{field:e})}),t.jsx(P,{})]})}function Fe(l){const{field:e}=l;return t.jsxs(S,{children:[t.jsx(y,{children:t.jsx(R,{className:"text-xl text-muted-foreground border-none bg-transparent shadow-none focus-visible:ring-0 p-0 h-auto",...e})}),t.jsx(P,{})]})}function Ie(l){const{field:e}=l;return t.jsxs(S,{children:[t.jsx(y,{children:t.jsx(R,{className:"text-2xl md:text-3xl  font-black border-none bg-transparent shadow-none focus-visible:ring-0 p-0 h-auto",...e})}),t.jsx(P,{})]})}function Ae(){return O.error("Erreur lors de la mise à jour")}function Ee(){return O.success("Article mis à jour !")}export{Ct as default};
