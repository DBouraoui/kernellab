import{c as U,a as q,b as E,j as s,r as G,H as J,t as A}from"./app-C5lTwHdN.js";import{a as P,A as K}from"./app-layout-Bkgev9_o.js";import{T as S,a as h,b as Q,c as W,d as X,e as f}from"./table-ftEWKizJ.js";import{B as Y}from"./badge-CLx4woac.js";import{B as D}from"./button-B3Yl_OTn.js";import{D as Z,a as ee,b as se,c as te,d as T}from"./dropdown-menu-MpvFRV45.js";import{S as re}from"./spinner-Dj3vLWuF.js";import{U as ae,P as le,V as ie}from"./view-contact-CVWgyewn.js";import{M as R}from"./mail-VEnb2v3Q.js";import{C as ne}from"./calendar-CUKNqOOo.js";import{E as oe}from"./ellipsis-C19lrCab.js";import{M as ce}from"./message-square-C-PsW2dC.js";import"./app-B1pgpXbD.js";import"./index-XrecUg5K.js";import"./index-DYvc6laF.js";import"./tooltip-DQ74tlMz.js";import"./index-Bi8myhfb.js";import"./index-BTa5M561.js";import"./index-CBZxXS5R.js";import"./index-v9zI-M-E.js";import"./index-6raR_gNw.js";import"./index-MV30uHUT.js";import"./index-DNHXitqj.js";import"./index-DRjZeCPR.js";import"./index-D0If7yHc.js";import"./avatar-Djc5mmgT.js";import"./index-CNP4AJTI.js";import"./app-logo-icon-B8uUZYx3.js";import"./chevron-right-D8Cnbahg.js";import"./index-CCa0ViFn.js";import"./index-DTWs1OQ1.js";import"./x-BXwvSmSF.js";import"./index-CjCA_Hra.js";import"./index-DBg_p2HY.js";import"./dialog-BMWB5aho.js";import"./separator-D9g81TnQ.js";import"./eye-oUbGEAaq.js";import"./tag-DUz6BQLF.js";const me=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]],de=U("Trash",me);function ts(r){const e=q.c(28),{contacts:B}=r;let j;e[0]===Symbol.for("react.memo_cache_sentinel")?(j={title:"Dashboard",href:P.dashboard().url},e[0]=j):j=e[0];let g;e[1]===Symbol.for("react.memo_cache_sentinel")?(g=[j,{title:"Mes contacts",href:P.contact().url}],e[1]=g):g=e[1];const L=g,p=Object.values(B),[a,b]=E.useState(1),u=Math.ceil(p.length/8),_=p.slice((a-1)*8,a*8),[H,k]=E.useState(!1),V=je,z=fe,I=function(O){k(!0),G.delete(`/dashboard/contact/${O.id}`,{onSuccess:ue,onError:pe,onFinish:()=>k(!1)})},w=K;let l;e[2]===Symbol.for("react.memo_cache_sentinel")?(l=s.jsx(J,{title:"Gestion des Messages"}),e[2]=l):l=e[2];const $="flex flex-col gap-6 p-6";let N;e[3]===Symbol.for("react.memo_cache_sentinel")?(N=s.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Inbox"}),e[3]=N):N=e[3];let i;e[4]!==p?(i=s.jsxs("div",{children:[N,s.jsxs("p",{className:"text-muted-foreground",children:["Vous avez ",p.length," message(s)."]})]}),e[4]=p,e[5]=i):i=e[5];const F="rounded-xl border bg-card",y=W;let n;e[6]===Symbol.for("react.memo_cache_sentinel")?(n=s.jsx(X,{children:s.jsxs(S,{className:"bg-muted/50",children:[s.jsx(f,{className:"w-[200px]",children:"Expéditeur"}),s.jsx(f,{children:"Objet / Raison"}),s.jsx(f,{className:"hidden md:table-cell",children:"Message"}),s.jsx(f,{children:"Date"}),s.jsx(f,{className:"text-right",children:"Actions"})]})}),e[6]=n):n=e[6];const C=Q,M=_.length>0?_.map(t=>s.jsxs(S,{children:[s.jsx(h,{children:s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("span",{className:"font-bold flex items-center gap-1.5",children:[s.jsx(ae,{className:"h-3 w-3 opacity-50"}),t.name]}),s.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[s.jsx(R,{className:"h-3 w-3"}),t.email]}),t.phone&&s.jsxs("span",{className:"text-[10px] text-muted-foreground flex items-center gap-1",children:[s.jsx(le,{className:"h-3 w-3"}),t.phone]})]})}),s.jsx(h,{children:s.jsx(Y,{variant:"outline",className:`capitalize ${z(t.reason)}`,children:t.reason})}),s.jsx(h,{className:"hidden md:table-cell max-w-[300px]",children:s.jsxs("p",{className:"text-sm text-muted-foreground truncate italic",children:['"',t.message,'"']})}),s.jsx(h,{children:s.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[s.jsx(ne,{className:"h-3 w-3"}),V(t.created_at)]})}),s.jsx(h,{className:"text-right",children:s.jsxs(Z,{children:[s.jsx(ee,{asChild:!0,children:s.jsx(D,{variant:"ghost",className:"h-8 w-8 p-0",children:s.jsx(oe,{className:"h-4 w-4"})})}),s.jsxs(se,{align:"end",className:"w-[160px]",children:[s.jsx(te,{children:"Actions"}),s.jsx(T,{asChild:!0,children:s.jsx(ie,{contact:t})}),s.jsxs(T,{onClick:()=>window.location.href=`mailto:${t.email}`,children:[s.jsx(R,{})," Répondre"]}),s.jsx(T,{className:"text-destructive",onClick:()=>I(t),children:H?s.jsx(re,{}):s.jsxs(s.Fragment,{children:[s.jsx(de,{className:"text-destructive"})," Supprimer"]})})]})]})})]},t.id)):s.jsx(S,{children:s.jsx(h,{colSpan:5,className:"h-32 text-center",children:s.jsxs("div",{className:"flex flex-col items-center text-muted-foreground",children:[s.jsx(ce,{className:"h-8 w-8 mb-2 opacity-20"}),s.jsx("p",{children:"Aucun message reçu."})]})})});let o;e[7]!==C||e[8]!==M?(o=s.jsx(C,{children:M}),e[7]=C,e[8]=M,e[9]=o):o=e[9];let c;e[10]!==y||e[11]!==o||e[12]!==n?(c=s.jsxs(y,{children:[n,o]}),e[10]=y,e[11]=o,e[12]=n,e[13]=c):c=e[13];let m;e[14]!==a||e[15]!==b||e[16]!==u?(m=u>1&&s.jsxs("div",{className:"flex justify-between items-center p-4 border-t",children:[s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Page ",a," sur ",u]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(D,{variant:"outline",size:"sm",disabled:a===1,onClick:()=>b(he),children:"Précédent"}),s.jsx(D,{variant:"outline",size:"sm",disabled:a===u,onClick:()=>b(xe),children:"Suivant"})]})]}),e[14]=a,e[15]=b,e[16]=u,e[17]=m):m=e[17];let d;e[18]!==c||e[19]!==m?(d=s.jsxs("div",{className:F,children:[c,m]}),e[18]=c,e[19]=m,e[20]=d):d=e[20];let x;e[21]!==d||e[22]!==i?(x=s.jsxs("div",{className:$,children:[i,d]}),e[21]=d,e[22]=i,e[23]=x):x=e[23];let v;return e[24]!==w||e[25]!==x||e[26]!==l?(v=s.jsxs(w,{breadcrumbs:L,children:[l,x]}),e[24]=w,e[25]=x,e[26]=l,e[27]=v):v=e[27],v}function xe(r){return r+1}function he(r){return r-1}function pe(){return A.error("Contact introuvable")}function ue(){return A.success("Contact supprimé avec succès")}function fe(r){const e={freelance:"bg-blue-500/10 text-blue-600 border-blue-200 hover:bg-blue-500/20",recruitment:"bg-orange-500/10 text-orange-600 border-orange-200 hover:bg-orange-500/20",consulting:"bg-emerald-500/10 text-emerald-600 border-emerald-200 hover:bg-emerald-500/20",other:"bg-slate-500/10 text-slate-600 border-slate-200 hover:bg-slate-500/20"};return e[r]||e.other}function je(r){return new Date(r).toLocaleDateString("fr-FR",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"})}export{ts as default};
