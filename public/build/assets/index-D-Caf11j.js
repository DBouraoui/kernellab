import{c as X,a as oe,b as ce,j as t,L as Z,r as ee,H as me,t as E}from"./app-C5lTwHdN.js";import{A as de,a as pe}from"./app-layout-Bkgev9_o.js";import{T as Q,a as M,c as xe,d as ue,e as q,b as he}from"./table-ftEWKizJ.js";import{D as fe,a as je,b as ge,c as be,d as W,e as _e}from"./dropdown-menu-MpvFRV45.js";import{B as F}from"./button-B3Yl_OTn.js";import{I as ve}from"./input-AiS0ET7Q.js";import{B as te}from"./badge-CLx4woac.js";import{C as se,c as Ne,a as re,b as ye}from"./card-CF9j4czJ.js";import{C as we}from"./calendar-CUKNqOOo.js";import{E as Ce}from"./ellipsis-C19lrCab.js";import{C as Se}from"./copy-C4t4hEDh.js";import{T as ke}from"./trash-2-Brh6uGvk.js";import{M as Te}from"./mail-VEnb2v3Q.js";import{S as De}from"./search-BTWd8buc.js";import"./app-B1pgpXbD.js";import"./index-XrecUg5K.js";import"./index-DYvc6laF.js";import"./tooltip-DQ74tlMz.js";import"./index-Bi8myhfb.js";import"./index-BTa5M561.js";import"./index-CBZxXS5R.js";import"./index-v9zI-M-E.js";import"./index-6raR_gNw.js";import"./index-MV30uHUT.js";import"./index-DNHXitqj.js";import"./index-DRjZeCPR.js";import"./index-D0If7yHc.js";import"./avatar-Djc5mmgT.js";import"./index-CNP4AJTI.js";import"./app-logo-icon-B8uUZYx3.js";import"./chevron-right-D8Cnbahg.js";import"./index-CCa0ViFn.js";import"./index-DTWs1OQ1.js";import"./x-BXwvSmSF.js";import"./index-CjCA_Hra.js";import"./index-DBg_p2HY.js";const Me=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Ee=X("Download",Me);const Ae=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],He=X("UserMinus",Ae);const Le=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Ue=X("UserPlus",Le),ze=[{title:"Dashboard",href:"/admin/dashboard"},{title:"Newsletter",href:"/admin/newsletter"}];function Ct($){const e=oe.c(80),{subscribers:s}=$,[a,ae]=ce.useState("");let m,d,p,x,u,l,h,i,f,n,o,j,c;if(e[0]!==a||e[1]!==s.data||e[2]!==s.total){let H;e[16]!==a?(H=r=>r.email.toLowerCase().includes(a.toLowerCase()),e[16]=a,e[17]=H):H=e[17];const Y=s.data.filter(H),le=Fe;let L;e[18]===Symbol.for("react.memo_cache_sentinel")?(L=function(O){ee.delete("/dashboard/newsletter/"+O,{onSuccess:qe,onError:Re})},e[18]=L):L=e[18];const ie=L;let U;e[19]===Symbol.for("react.memo_cache_sentinel")?(U=function(O){ee.patch("/dashboard/newsletter/"+O,{},{onSuccess:Pe,onError:Ie})},e[19]=U):U=e[19];const ne=U;x=de,j=ze,e[20]===Symbol.for("react.memo_cache_sentinel")?(c=t.jsx(me,{title:"Gestion Newsletter"}),e[20]=c):c=e[20],f="p-4 md:p-8 space-y-6";let z;e[21]===Symbol.for("react.memo_cache_sentinel")?(z=t.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Newsletter"}),e[21]=z):z=e[21];let D;e[22]!==s.total?(D=t.jsxs("div",{children:[z,t.jsxs("p",{className:"text-muted-foreground italic",children:["Gérez vos ",s.total," abonnés et exportez votre liste."]})]}),e[22]=s.total,e[23]=D):D=e[23];let B;e[24]===Symbol.for("react.memo_cache_sentinel")?(B=t.jsx("div",{className:"flex items-center gap-2",children:t.jsxs(F,{onClick:Be,variant:"outline",size:"sm",className:"h-9",children:[t.jsx(Ee,{className:"mr-2 h-4 w-4"})," Export CSV"]})}),e[24]=B):B=e[24],e[25]!==D?(n=t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[D,B]}),e[25]=D,e[26]=n):n=e[26];let I;e[27]===Symbol.for("react.memo_cache_sentinel")?(I=t.jsxs(re,{className:"p-4 flex flex-row items-center justify-between space-y-0",children:[t.jsx(ye,{className:"text-sm font-medium",children:"Total Abonnés"}),t.jsx(Te,{className:"h-4 w-4 text-primary"})]}),e[27]=I):I=e[27],e[28]!==s.total?(o=t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:t.jsxs(se,{className:"bg-card/50 backdrop-blur-sm border-primary/10",children:[I,t.jsx(Ne,{className:"p-4 pt-0",children:t.jsx("div",{className:"text-2xl font-bold",children:s.total})})]})}),e[28]=s.total,e[29]=o):o=e[29],p=se,h="border-border/40 shadow-sm overflow-hidden";let P;e[30]===Symbol.for("react.memo_cache_sentinel")?(P=t.jsx(De,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e[30]=P):P=e[30];let R;e[31]===Symbol.for("react.memo_cache_sentinel")?(R=r=>ae(r.target.value),e[31]=R):R=e[31],e[32]!==a?(i=t.jsx(re,{className:"bg-muted/30 pb-4",children:t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{className:"relative w-full max-w-sm",children:[P,t.jsx(ve,{placeholder:"Rechercher un email...",className:"pl-9 bg-background",value:a,onChange:R})]})})}),e[32]=a,e[33]=i):i=e[33],d=xe,e[34]===Symbol.for("react.memo_cache_sentinel")?(l=t.jsx(ue,{className:"bg-muted/20",children:t.jsxs(Q,{children:[t.jsx(q,{className:"w-[300px]",children:"Utilisateur"}),t.jsx(q,{children:"Statut"}),t.jsx(q,{children:"Date d'inscription"}),t.jsx(q,{className:"text-right",children:"Actions"})]})}),e[34]=l):l=e[34],m=he,u=Y.length>0?Y.map(r=>t.jsxs(Q,{className:"group hover:bg-muted/50 transition-colors",children:[t.jsx(M,{className:"font-medium",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"h-9 w-9 rounded-full bg-primary/10 flex items-center justify-center text-primary text-xs font-bold",children:r.email.substring(0,2).toUpperCase()}),t.jsx("span",{className:"truncate",children:r.email})]})}),t.jsx(M,{children:r.active?t.jsxs(te,{variant:"secondary",className:"bg-green-500/10 text-green-600 hover:bg-green-500/10 border-green-500/20 gap-1.5",children:[t.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-green-600 animate-pulse"}),"Actif"]}):t.jsx(te,{variant:"outline",className:"text-muted-foreground",children:"Inactif"})}),t.jsx(M,{className:"text-muted-foreground text-sm",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(we,{className:"h-3.5 w-3.5"}),new Date(r.created_at).toLocaleDateString("fr-FR")]})}),t.jsx(M,{className:"text-right",children:t.jsxs(fe,{children:[t.jsx(je,{asChild:!0,children:t.jsx(F,{variant:"ghost",className:"h-8 w-8 p-0 hover:bg-background shadow-none",children:t.jsx(Ce,{className:"h-4 w-4"})})}),t.jsxs(ge,{align:"end",className:"w-48 rounded-xl",children:[t.jsx(be,{children:"Actions"}),t.jsxs(W,{onClick:()=>le(r.email),className:"cursor-pointer",children:[t.jsx(Se,{className:"mr-2 h-4 w-4"})," Copier l'email"]}),t.jsx(_e,{}),t.jsx(W,{onClick:()=>ne(r.id),className:"text-amber-600 cursor-pointer",children:r.active?t.jsxs(t.Fragment,{children:[t.jsx(He,{className:"mr-2 h-4 w-4"})," Désactiver"]}):t.jsxs(t.Fragment,{children:[t.jsx(Ue,{className:"mr-2 h-4 w-4"})," Activer"]})}),t.jsxs(W,{onClick:()=>ie(r.id),className:"text-destructive cursor-pointer font-medium",children:[t.jsx(ke,{className:"mr-2 h-4 w-4"})," Supprimer"]})]})]})})]},r.id)):t.jsx(Q,{children:t.jsx(M,{colSpan:4,className:"h-32 text-center text-muted-foreground italic",children:"Aucun abonné trouvé..."})}),e[0]=a,e[1]=s.data,e[2]=s.total,e[3]=m,e[4]=d,e[5]=p,e[6]=x,e[7]=u,e[8]=l,e[9]=h,e[10]=i,e[11]=f,e[12]=n,e[13]=o,e[14]=j,e[15]=c}else m=e[3],d=e[4],p=e[5],x=e[6],u=e[7],l=e[8],h=e[9],i=e[10],f=e[11],n=e[12],o=e[13],j=e[14],c=e[15];let g;e[35]!==m||e[36]!==u?(g=t.jsx(m,{children:u}),e[35]=m,e[36]=u,e[37]=g):g=e[37];let b;e[38]!==d||e[39]!==g||e[40]!==l?(b=t.jsxs(d,{children:[l,g]}),e[38]=d,e[39]=g,e[40]=l,e[41]=b):b=e[41];let _;e[42]!==s.current_page||e[43]!==s.last_page||e[44]!==s.total?(_=t.jsxs("p",{className:"text-xs text-muted-foreground",children:["Page ",s.current_page," sur ",s.last_page," (",s.total," abonnés)"]}),e[42]=s.current_page,e[43]=s.last_page,e[44]=s.total,e[45]=_):_=e[45];const G=!!s.prev_page_url,V=!s.prev_page_url;let v;e[46]!==s.prev_page_url?(v=s.prev_page_url?t.jsx(Z,{href:s.prev_page_url,preserveScroll:!0,children:"Précédent"}):t.jsx("span",{children:"Précédent"}),e[46]=s.prev_page_url,e[47]=v):v=e[47];let N;e[48]!==G||e[49]!==V||e[50]!==v?(N=t.jsx(F,{variant:"outline",size:"sm",asChild:G,disabled:V,children:v}),e[48]=G,e[49]=V,e[50]=v,e[51]=N):N=e[51];const J=!!s.next_page_url,K=!s.next_page_url;let y;e[52]!==s.next_page_url?(y=s.next_page_url?t.jsx(Z,{href:s.next_page_url,preserveScroll:!0,children:"Suivant"}):t.jsx("span",{children:"Suivant"}),e[52]=s.next_page_url,e[53]=y):y=e[53];let w;e[54]!==J||e[55]!==K||e[56]!==y?(w=t.jsx(F,{variant:"outline",size:"sm",asChild:J,disabled:K,children:y}),e[54]=J,e[55]=K,e[56]=y,e[57]=w):w=e[57];let C;e[58]!==N||e[59]!==w?(C=t.jsxs("div",{className:"flex gap-2",children:[N,w]}),e[58]=N,e[59]=w,e[60]=C):C=e[60];let S;e[61]!==_||e[62]!==C?(S=t.jsxs("div",{className:"p-4 border-t border-border/40 bg-muted/10 flex items-center justify-between",children:[_,C]}),e[61]=_,e[62]=C,e[63]=S):S=e[63];let k;e[64]!==p||e[65]!==b||e[66]!==S||e[67]!==h||e[68]!==i?(k=t.jsxs(p,{className:h,children:[i,b,S]}),e[64]=p,e[65]=b,e[66]=S,e[67]=h,e[68]=i,e[69]=k):k=e[69];let T;e[70]!==k||e[71]!==f||e[72]!==n||e[73]!==o?(T=t.jsxs("div",{className:f,children:[n,o,k]}),e[70]=k,e[71]=f,e[72]=n,e[73]=o,e[74]=T):T=e[74];let A;return e[75]!==x||e[76]!==T||e[77]!==j||e[78]!==c?(A=t.jsxs(x,{breadcrumbs:j,children:[c,T]}),e[75]=x,e[76]=T,e[77]=j,e[78]=c,e[79]=A):A=e[79],A}function Be(){return window.location.href=pe.newsletter.export().url}function Ie(){E.error("Erreur de modification de l'utilisateur")}function Pe(){E.success("Utilisateur moodifier")}function Re(){E.error("Erreur de suppression de l'utilisateur")}function qe(){E.success("Utilisateur supprimer de la newsletter")}function Fe($){navigator.clipboard.writeText($),E.success("Email copié !")}export{Ct as default};
